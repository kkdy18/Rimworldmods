<?xml version="1.0" encoding="utf-8" ?>
<Defs>
	<ThingDef ParentName="NY_DragonWeaponMedieval">
		<defName>NY_GrenadeLightning</defName>
		<label>雷符</label>
		<description>用精血绘制了引雷咒的符纸，掷出后片刻可以引来天雷轰击，杀伤力有限但大量投掷也有可观的威力。\n\n雷符不用时务必妥善保管，符咒引发的雷击能够穿透建筑，存在火灾隐患。</description>
		<graphicData>
			<texPath>Things/Weapon/NY_GrenadeLightning</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<uiIconScale>1.3</uiIconScale>
		<soundInteract></soundInteract>
		<statBases>
			<Mass>1</Mass>
			<RangedWeapon_Cooldown>0.5</RangedWeapon_Cooldown>
			<WorkToMake>12000</WorkToMake>
		</statBases>
		<costList>
			<Cloth>30</Cloth>
			<NY_BloodEssence>60</NY_BloodEssence>
		</costList>
		<recipeMaker>
			<researchPrerequisite>ForgingDragonSuperiorWeapon</researchPrerequisite>
			<skillRequirements>
				<Crafting>9</Crafting>
			</skillRequirements>
			<displayPriority>1271.4</displayPriority>
		</recipeMaker>
		<weaponTags>
			<li>NY_DragonWeaponRanged</li>
		</weaponTags>
		<thingCategories>
			<li>NY_DragonWeaponRanged</li>
		</thingCategories>
		<weaponClasses>
			<li>Ranged</li>
		</weaponClasses>
		<tradeTags>
			<li>NY_DragonWeaponRanged</li>
		</tradeTags>
		<verbs>
			<li>
				<label>投掷雷符</label>
				<verbClass>Verb_LaunchProjectile</verbClass>
				<hasStandardCommand>true</hasStandardCommand>
				<range>12.9</range>
				<forcedMissRadius>1.9</forcedMissRadius>
				<warmupTime>1</warmupTime>
				<noiseRadius>1</noiseRadius>
				<soundCast></soundCast>
				<targetParams>
					<canTargetLocations>true</canTargetLocations>
				</targetParams>
				<defaultProjectile>NY_grenadeLightning</defaultProjectile>
				<rangedFireRulepack>Combat_RangedFire_Thrown</rangedFireRulepack>
			</li>
		</verbs>
		<comps>
		</comps>
	</ThingDef>

	<ThingDef ParentName="BaseGrenadeProjectile">
		<defName>NY_grenadeLightning</defName>
		<label>雷符</label>
		<thingClass>ForgingDragon.Projectile_LightningBomb</thingClass>
		<graphicData>
			<texPath>Things/Projectile/NY_grenadeLightning</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<projectile>
			<explosionRadius>1.9</explosionRadius>
			<damageDef>Flame</damageDef>
			<explosionDelay>50</explosionDelay>
		</projectile>
	</ThingDef>
	
	<ThingDef ParentName="NY_BaseDragonWeaponRanged">
		<defName>NY_DragonGourd</defName>
		<label>赤檀焱葫芦</label>
		<description>装满火油的特制葫芦，冶龍工匠精心设计的战场杀器，它能从葫芦口喷出熊熊烈火焚烧一切，亦可将大量火油一气猛然喷出，点燃火海逼退敌人。\n\n葫芦不用时务必妥善保管，一时走水伤人亦伤己。</description>
		<tickerType>Normal</tickerType>
		<graphicData>
			<texPath>Things/Weapon/NY_DragonGourd</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<soundInteract>Shot_MiniFlameblaster</soundInteract>
		<statBases>
			<WorkToMake>48000</WorkToMake>
			<Mass>1.2</Mass>
			<RangedWeapon_Cooldown>3</RangedWeapon_Cooldown>
			<Flammability>0.7</Flammability>
		</statBases>
		<weaponTags>
			<li>NY_DragonWeaponRanged_Gourd</li>
		</weaponTags>
		<weaponClasses>
			<li>RangedLight</li>
		</weaponClasses>
		<costList>
			<Gold>3</Gold>
			<WoodLog>70</WoodLog>
			<Chemfuel>70</Chemfuel>
			<NY_GreenGlaze>5</NY_GreenGlaze>
		</costList>
		<recipeMaker>
			<researchPrerequisite>ForgingDragonSuperiorWeapon</researchPrerequisite>
			<skillRequirements>
				<Crafting>9</Crafting>
			</skillRequirements>
			<displayPriority>1271.4</displayPriority>
		</recipeMaker>
		<thingSetMakerTags>
			<li>RewardStandardQualitySuper</li>
		</thingSetMakerTags>
		<verbs>
			<li>
				<verbClass>ForgingDragon.Verb_FireGourd</verbClass>
				<hasStandardCommand>true</hasStandardCommand>
				<warmupTime>0.5</warmupTime>
				<range>17.9</range>
				<minRange>5.9</minRange>
				<beamFullWidthRange>11</beamFullWidthRange>
				<burstShotCount>20</burstShotCount>
				<showBurstShotStats>false</showBurstShotStats>
				<requireLineOfSight>true</requireLineOfSight>
				<beamWidth>6</beamWidth>
				<ticksBetweenBurstShots>2</ticksBetweenBurstShots>
				<beamDamageDef>Flame</beamDamageDef>
				<soundCastTail>GunTail_Medium</soundCastTail>
				<muzzleFlashScale>9</muzzleFlashScale>
				<soundCastBeam>Flamethrower_Firing</soundCastBeam>
				<beamGroundFleckDef>Fleck_BeamBurn</beamGroundFleckDef>
				<beamFleckChancePerTick>0.32</beamFleckChancePerTick>
				<beamMaxDeviation>0.5</beamMaxDeviation>
				<beamCurvature>0</beamCurvature>
				<beamMoteDef>NY_Mote_Burst</beamMoteDef>
				<beamEndEffecterDef>NY_Beam_End</beamEndEffecterDef>
				<beamChanceToStartFire>0.85</beamChanceToStartFire>
				<beamFireSizeRange>0.55~0.85</beamFireSizeRange>
				<beamStartOffset>0.5</beamStartOffset>
				<beamHitsNeighborCells>true</beamHitsNeighborCells>
				<beamCantHitWithinMinRange>true</beamCantHitWithinMinRange>
				<beamHitsNeighborCellsRequiresLOS>true</beamHitsNeighborCellsRequiresLOS>
				<beamSetsGroundOnFire>true</beamSetsGroundOnFire>
				<ai_BeamIsIncendiary>true</ai_BeamIsIncendiary>
				<beamLineFleckDef>Fleck_BeamSpark</beamLineFleckDef>
				<highlightColor>(180, 60, 10)</highlightColor>
				<secondaryHighlightColor>(220, 210, 20)</secondaryHighlightColor>
				<beamLineFleckChanceCurve>
					<points>
						<li>(0, 0)</li>
						<li>(0.65, 0.02)</li>
						<li>(1, 0.5)</li>
					</points>
				</beamLineFleckChanceCurve>
				<targetParams>
					<canTargetLocations>true</canTargetLocations>
				</targetParams>
				<flammabilityAttachFireChanceCurve>
					<points>
						<li>(0.6, 0)</li>
						<li>(0.7, 0.2)</li>
						<li>(1.2, 0.8)</li>
					</points>
				</flammabilityAttachFireChanceCurve>
			</li>
		</verbs>
		<comps>
			<li Class="CompProperties_EquippableAbility">
				<abilityDef>NY_ability_GourdFire</abilityDef>
			</li>
			<li Class="CompProperties_Explosive">
				<explosiveRadius>3.5</explosiveRadius>
				<explosiveDamageType>Flame</explosiveDamageType>
				<requiredDamageTypeToExplode>Flame</requiredDamageTypeToExplode>
			</li>
			<li Class="CompProperties_Art">
				<nameMaker>NamerArtWeaponGun</nameMaker>
				<descriptionMaker>ArtDescription_WeaponGun</descriptionMaker>
				<minQualityForArtistic>Excellent</minQualityForArtistic>
			</li>
		</comps>
	</ThingDef>

	<AbilityDef>
		<defName>NY_ability_GourdFire</defName>
		<label>葫芦火</label>
		<description>猛拍葫芦喷出毒火热油，烧出一条火路宽又长。</description>
		<iconPath>UI/Abilities/FireSpew</iconPath>
		<cooldownTicksRange>30000</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<ai_IsIncendiary>true</ai_IsIncendiary>
		<sendMessageOnCooldownComplete>false</sendMessageOnCooldownComplete>
		<warmupStartSound>FireSpew_Warmup</warmupStartSound>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>17.9</range>
			<warmupTime>1.5</warmupTime>
			<soundCast>FireSpew_Resolve</soundCast>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
			</targetParams>
		</verbProperties>
		<comps>
			<li Class="CompProperties_AbilityFireSpew">
				<range>17.9</range>
				<lineWidthEnd>3</lineWidthEnd>
				<filthDef>Filth_FlammableBile</filthDef>
				<effecterDef>Fire_Spew</effecterDef>
				<canHitFilledCells>true</canHitFilledCells>
			</li>
		</comps>
	</AbilityDef>

	<ThingDef ParentName="EtherealThingBase">
		<defName>NY_FireGourdSpray</defName>
		<selectable>false</selectable>
		<tickerType>Normal</tickerType>
		<thingClass>IncineratorSpray</thingClass>
		<drawOffscreen>true</drawOffscreen>
	</ThingDef>

	<ThingDef ParentName="MoteBase">
		<defName>NY_Mote_Burst</defName>
		<thingClass>MoteDualAttached</thingClass>
		<altitudeLayer>MoteOverhead</altitudeLayer>
		<isSaveable>false</isSaveable>
		<mote>
			<fadeInTime>0</fadeInTime>
			<fadeOutTime>1</fadeOutTime>
			<solidTime>999999</solidTime>
			<needsMaintenance>True</needsMaintenance>
			<rotateTowardsTarget>True</rotateTowardsTarget>
			<scaleToConnectTargets>False</scaleToConnectTargets>
			<fadeOutUnmaintained>True</fadeOutUnmaintained>
		</mote>
		<drawOffscreen>true</drawOffscreen>
		<graphicData>
			<texPath>Things/Mote/NY_FlameSheet</texPath>
			<graphicClass>Graphic_MoteWithAgeSecs</graphicClass>
			<shaderType>MoteIncineratorBeam</shaderType>
			<shaderParameters>
				<_GradientTex>/Things/Mote/NY_BeamGradient</_GradientTex>
				<_AgeScalarNoise>/Things/Mote/NY_BeamAgeNoise</_AgeScalarNoise>
				<_ScrollSpeedA>-4</_ScrollSpeedA>
				<_ScrollSpeedB>3</_ScrollSpeedB>
				<_Intensity>0</_Intensity>
				<_NumFrames>12</_NumFrames>
				<_FramesPerSec>12</_FramesPerSec>
			</shaderParameters>
			<drawSize>10</drawSize>
		</graphicData>
	</ThingDef>

	<EffecterDef>
		<defName>NY_Beam_End</defName>
		<children>
			<li>
				<subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
				<fleckDef>Smoke</fleckDef>
				<chancePerTick>0.4</chancePerTick>
				<scale>0.6~1.1</scale>
				<spawnLocType>OnSource</spawnLocType>
				<absoluteAngle>true</absoluteAngle>
				<angle>30~70</angle>
				<speed>0.2~0.35</speed>
			</li>
			<li>
				<subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
				<positionRadius>0.1</positionRadius>
				<moteDef>Mote_SparkThrownFast</moteDef>
				<spawnLocType>OnSource</spawnLocType>
				<chancePerTick>0.9</chancePerTick>
				<speed>3.3~5</speed>
				<scale>0.1~0.2</scale>
				<angle>88~104</angle>
				<fleckUsesAngleForVelocity>true</fleckUsesAngleForVelocity>
			</li>
			<li>
				<subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
				<positionRadius>0.1</positionRadius>
				<spawnLocType>OnSource</spawnLocType>
				<fleckDef>NY_BeamEnd_Glow</fleckDef>
				<chancePerTick>0.5</chancePerTick>
				<scale>0.8</scale>
			</li>
		</children>
	</EffecterDef>

	<FleckDef ParentName="FleckBase_Thrown">
		<defName>NY_BeamEnd_Glow</defName>
		<altitudeLayer>LightingOverlay</altitudeLayer>
		<fadeInTime>0.01</fadeInTime>
		<solidTime>0.105</solidTime>
		<fadeOutTime>0.04</fadeOutTime>
		<graphicData>
			<graphicClass>Graphic_Fleck</graphicClass>
			<texPath>Things/Mote/NY_BeamEnd_Glow</texPath>
			<shaderType>MoteGlow</shaderType>
			<drawSize>12</drawSize>
			<color>(1, .7, 0.09, 0.75)</color>
		</graphicData>
	</FleckDef>
</Defs>